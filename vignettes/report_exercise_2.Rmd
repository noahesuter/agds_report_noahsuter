---
title: "report_2"
author: "Noah Suter"
date: "`r Sys.Date()`"
output: html_document
---

# AGDS Report_2

```{r}
airquality <- datasets::airquality #loading the data set and creating a table
```

```{r}
?datasets::airquality #getting the necessary background information
```

```{r}
visdat::vis_miss(airquality) #checking for missing values
```
One can see that a big part of the ozone values are missing with 24%. But the Solar radiation has missing values as well (5%). This will be important to consider if one of these two is used. (especially important for the interpretation)
## Task 1
### figures

```{r}
airquality_2 <- dplyr::mutate(airquality, month = Month)
airquality_2 <- airquality_2 |>
  dplyr::mutate(Month = lubridate::month(Month, label = TRUE)) #adding a column where the months are a word and not a number
```

# Figure 1 - (Geom_line)
```{r}
ggplot2::ggplot(
  airquality_2,
  ggplot2::aes(x = Solar.R, y = Temp)) + #defining the axes
  ggplot2::geom_line(na.rm = TRUE) + #defining the type of graphic
  ggplot2::geom_smooth(method = "lm", color = "blue", se = FALSE, na.rm = TRUE) + #defining the geom_smooth
  ggplot2::stat_smooth(position = "identity", method = "auto", formula = y ~ x, n = 153, level = 0.95, na.rm = TRUE, color = "green") + #defining the stat_smooth 
  ggplot2::labs(title = "Relation of Solar radiation and Temperature", subtitle = "per Month from Mai to September", y = "Temperature [in Fahrenheit]", x = "Solar radiation [in lang]", caption = "Solar radiation: 0800 hours to 1200 hours at Central Park NYC\n Temperatur: maximum daily temperatur at LA Guardia Airport  ")  + #defining the labs
  ggplot2::facet_wrap(~Month) # creating one graphic per month
```

```{r}
airquality_3 <- airquality |>
  dplyr::mutate(date = lubridate::make_date(month = Month, day = Day)) # adding a column with the exact date of the year in the format "yyyy-mm-dd"
```

#### Figure 2
```{r}
ggplot2::ggplot(airquality_3, ggplot2::aes(y = Temp, x = Solar.R)) + #defining the axes
  ggplot2::geom_point() + # defining the type of graphic
  ggplot2::labs(y ="Temperature [in Fahrenheit]",
       x = "Solar Radiation [in lang]", caption = "Solar radiation: 0800 hours to 1200 hours at Central Park NYC\n Temperatur: maximum daily temperatur at LA Guardia Airport  ", title = "Relation of Solar radiation and Temperature")+ #creating the labs
  ggplot2::theme_classic() #defining the theme
```


#### Figure 3
```{r}
library(ggplot2)
ggplot(
    airquality_3,
    aes(x = Solar.R, y = Temp)) + #defining the axes
  stat_density_2d(
    geom = "raster", # the geometric object to display the data
    aes(fill = after_stat(density)), # using `density`, a variable calculated by the stat
    contour = FALSE 
    ) +
  scale_fill_viridis_c() +
  labs(title = "Relation between Temperatur and Solar radiation", x = "Solar Radiation [in lang]", 
       y = "Temperatur [in Fahrenheit]", caption = "Solar radiation: 0800 hours to 1200 hours at Central Park NYC\n Temperatur: maximum daily temperatur at LA Guardia Airport  ") + #defining the labs
  theme_classic() + #defining the theme
  scale_x_continuous(expand = c(0, 0)) +  # avoid gap between plotting area and axis
  scale_y_continuous(expand = c(0, 0)) #same for other axis
```

## Task 2
The two metrics i worked with are Temperature and Solar radiation. Therefore it is important to say that the metric Solar Radiation has a missing value percentage of 5% which can influence the results. Good statistical metrics could be the mean, the median or the standard deviation. I chose those to look at the range and distribution of the values as this can show certain things like whether there are more values below of above the mean or how far they are off the mean on average.

```{r}
mean(airquality_3$Solar.R, na.rm = TRUE)
median(airquality_3$Solar.R, na.rm = TRUE)
sd(airquality_3$Solar.R, na.rm = TRUE)
```
as the median is bigger than the mean, there are more values that are higher than the mean. Therefore, the values that are below the mean must differ stronger from the mean than the ones above. the standard deviation is pretty big. But it possibly can be explained by clouds that can make a big difference in terms of solar Radiation being stopped from reaching the earth's surface on certain days.

```{r}
mean(airquality_3$Temp, na.rm = TRUE)
median(airquality_3$Temp, na.rm = TRUE)
sd(airquality_3$Temp, na.rm = TRUE)
```
Here the median and mean do not differ much. the standard deviation as well is not that big which might explain the rather small difference between the mean and the median. (as the data is not scattered but rather close together) Overall the rather low standard deviation could be explained due to the fact that only the highest temperature of the day was included in the data set. If lower temperatures would have been included as well, we would need to expect a bigger scattering of the data.


## Task 3
The figures all show a similar trend. The trend that in areas of higher Solar radiation the Temperature is higher as well. This would make sense because higher Solar radiation warms up the earth's surface. This could then lead to an increased Temperature in the atmosphere as well.
Following these thoughts, i created the following thesis:

"increased solar radiation leads to higher temperature in the atmosphere"

This thesis cannot be confirmed due to various reasons. One is the depth of the data. As the data only presents one value per day, the correleation cannot be proved. A second reason is that the metric Solar Radiation has missing values (5%). Another reason is how the data was measured. On one hand the Temperature is shown as the maximum that was reached that day. The Solar radiation has been measured from 0800 hours to 1200 hours and therefore not over the whole day. Therefore, it is already difficult to compare these two and even harder to determine a relation. Another big problem is the place where these data has been measured. Because the Solar radiation was measured at the Central Park in NYC while the Temperature was measured at the LAGuardia Airport. 
Overall it can be said that due to the depth of the data (only daily) and due to different measurement locations and types the comparison of them does not make that much sense. And it definitly does not make sense trying to determine a relation or a correlation between these two metrics.
